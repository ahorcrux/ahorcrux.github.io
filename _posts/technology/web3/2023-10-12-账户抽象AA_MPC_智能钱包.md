---
title: EOA、MPC、账户抽象（AA）
author: since2014
date: 2023-10-12 18:03:00 +0800
categories: [Technology, Blockchain]
tags: [blockchain, web3, AA, MPC, 账户抽象]
render_with_liquid: false
---

# EOA、智能合约钱包、MPC

## 以太坊账户类型

+ **外部账户**：EOA（*Externally Owned Account*）

  通过助记词、公私钥对来签署交易、管理资产

  > *无法撤销密钥，EOA账户的密钥无法更换，一旦暴露私钥资产就无法保 证，好比因为换了一把钥匙而换了房子*

+ **合约账户**：CA（*Contract Account*）

## MPC钱包

使用*阈值签名方案* **TSS**消除单点故障，在这个范式下，我们创建并分发私钥的一部分，这样就没有一个人或者机器能够完全控制私钥（这个过程被称为分布式密钥生成 DKG）。
为了对消息和交易进行签名，每一方都要输入秘密共享部分与公共输入 ( 要签名的消息 )，以生成数字签名。从那里，任何知道公钥的人 ( 即验证者节点 ) 都应该能够验证和验证签名。

>  *无单点故障；
>  可调整的签名方案，签名人数可动态调整；
>  粒度访问控制，即权限可分配；*

>  *链下问责制。签署授权政策和批准固定人数是在链下管理的，因此这些自定义规则仍然容易出现中心化问题。密钥共享仍然是加密秘密，应该像处理整个私钥一样处理。链下规则和签名阻碍了透明度，需要更严格的运营审计。
>  与许多用户采用的大多数传统钱包不兼容 ( 没有助记词，没有完整的私钥存储在单个设备上 )。MPC 算法也没有标准化，也没有得到机构级安全设备 ( 如 iPhone SEP 和 HSM) 的原生支持。
> 大多是孤立的定制产品。*

## 智能合约钱包

<p>智能合约钱包 (「智能钱包」) 是一种行为类似于钱包的智能合约，即一个允许用户管理资金、进行 web3 登录和与 dApp 交互的界面。智能合约钱包是账户抽象的一种实现方式</p>

> *无单点故障。执行交易需要多个签名*
> 
> *可编程访问控制。用户可以定义不同的政策，设置时间锁、支出限制、自动化*
> 
> *可以实现交易批处理以节省成本*
> 
> *开源、可扩展*

> *不同链之间的钱包如何互通兼容，包括EVM与非EVM?*

## 账户抽象AA

***账户抽象带来的好处***：

- 灵活定义自己的安全规则
- 丢失密钥后找回帐户
- 在信赖的设备或个人之间共享帐户安全性
- 支付他人的燃料费用，或让他人为你支付燃料费用
- 批量交易（例如，一次性批准并执行兑换）
- 增加去中心化应用程序和钱包开发者创新用户体验的机会

***在安全方式的应用示例***：

+ **多重签名授权**
  
  你可以在多个受信任的人或设备之间共享授权凭证。 然后，可以对合约进行配置，以便超过预设值的交易需要获得一定比例（例如 3/5）的受信任方的授权。 例如，高价值的交易可能需要在移动设备和硬件钱包上都获得批准，或者需要分散在受信任家庭成员的帐户的签名。

+ **帐户冻结**
  
  如果设备丢失或被入侵，可以从另一个经过授权的设备上锁定帐户，以保护用户的资产安全。

+ **帐户找回**
  
  丢失设备或忘记密码了？ 在目前的模式下，这意味着你的资产可能被永远冻结。 通过智能合约钱包，你可以对一些帐户进行预授权，使其可以授权新设备并重置访问权限。

+ **设置交易限额**
  
  指定一天/一周/一个月内每天最高可以从帐户中转出的价值。 这意味着，即使攻击者成功获得了你的帐户的访问权限，他们也无法一次性将所有资金转移走，而你有机会冻结帐户并重新设置访问权限。

+ **创建白名单**
  
  仅允许与你认为安全的特定地址进行交易。 这意味着*即使* 你的私钥被盗，攻击者也无法将资金发送到非白名单目标帐户。 这些白名单需要多个签名才能更改，这样除非攻击者能够获得你的多个备份密钥，否则无法将自己的地址添加到名单中。

***在GAS方面的好处：***

+ 不一定需要ETH才能支付gas
  
  燃料管理是以太坊用户主要面临的问题之一，主要是因为以太币是唯一可用于支付交易费用的资产。 假设你的钱包内有 USDC 余额但没有以太币余额。 由于你无法支付燃料费用，所以无法转移或交换这些 USDC 代币。 你也无法将 USDC 交换成以太币，因为这个操作本身也需要支付燃料费用。 要解决这个问题，你需要从交易所或其他地址向你的帐户发送更多以太币。 通过智能合约钱包，你可以轻松使用 USDC 支付燃料费用，从而解放你的帐户。 你不再需要在所有帐户中保持以太币余额了。
  
  帐户抽象还可以让去中心化应用程序的开发者以创造性的方式进行燃料管理。 例如，你可以考虑与你最喜爱的去中心化交易所达成协议，每月支付固定费用以获得无限次交易的权限。 去中心化应用可能会作为你使用其平台的奖励或入门优惠，为你支付所有燃料费用。 当智能合约钱包在协议层面得到支持时，开发者在燃料管理方面进行创新将更加容易。

  *将用户操作抽象为账户，通过可编程的方式去定义，比如通过编写合约代码来定制账户的功能，比如多签*

+ **EIP-4337**

将签名验证、gas 支付和重放保护从核心协议移出到 EVM 中，让用户能够使用包含任意验证逻辑的智能钱包，而不是将 EOA 作为他们的主要帐户，同时也无需任何共识层更改
该 EIP 引入了一个 UserOperations 内存池，它与现有的内存池并行存在。捆绑器 ( 验证者、MEV 搜索者或应用程序本身 ) 从 UserOperations 池获取交易，将它们转发给区块链并支付费用。在这里，启动钱包本身不支付 gas 费用，但应用程序可以通过收费订阅模式为用户聚合。

> *EIP-4337定义了类似ERC20的智能合约接口规范，智能合约钱包服务商按照该规范实现*

+ **EIP-3074**

允许 EOA 将控制权委托给合约，让现有的 EOA 发送由第三方支付的操作

+ **EIP-2771**
  
  不改变以太坊协议进行账户抽象

+ **EIP-2938**
  
  改变以太坊协议以支持账户抽象

+ **EIP-5003**

将现有的 EOA 升级为合约，并允许其从 ECDSA 迁移到更高效或抗量子签名方案

## 代表项目

* **Gnosis Safe**

## 参考来源

+ [Ethereum Account Abstraction](https://ethereum.org/zh/roadmap/account-abstraction/)